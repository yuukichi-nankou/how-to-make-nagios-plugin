## NagiosPluginを作ろう

な
---
## 突然ですがこんな経験ないですか？
---
```
急ぎで協力いただけませんか？動ける人いますか？
Nagios Plugin を作っていただきたい
指定したプロセスが指定時間以上動き続けたらCRITICALとなる Plugin です。
たぶん、1時間以上で引っ掛けるとかになると思います
動作環境、CentOS7
ライブラリ依存が少ないほうが望ましい。
締め切り：本日18時
```
---
### この問題を解決するために必要な要素
---
* Nagiosプラグインのルール（CRITICALにする方法）
* 指定したプロセスの稼働時間を取得する
* プログラムを書く
---
### Nagios プラグインのルール
* プラグインの Exit ステータス でサービスのステータスが決まる
```
0 : OK
1 : WARNING
2 : CRITICAL
3 : UNKNOWN
```
* プラグインの標準出力がステータス情報として処理される。
* 出力に|（パイプ）が含まれている場合、パイプ以降はパフォーマンスデータとして処理される
---
#### 早速実装してみよう shell 編
./shell/ 以下を参照
---
### 実装したのもつかの間、こんな依頼が
```
GCP の stack driver で収集しているメトリックを監視したい！！
```
---
#### 早速実装してみよう python 編
./python/ 以下を参照
---
### 実装したのもつかの間、こんなことに…
```
pythonだと一度の処理に時間がかかりすぎるよ…！！
早くしたい
あと、pythonが入ってない環境でも実行できるようにならない？？
```
---
#### 早速実装してみよう go lang 編
./go/ 以下を参照
---
### おまけ （グラフの作り方）
./graph/ 以下を参照
---
### おわり
