## NagiosPluginを作ろう

な
---
## 突然ですがこんな経験ないですか？
---
```
急ぎで協力いただけませんか？動ける人いますか？
Nagios Plugin を作っていただきたい
指定したプロセスが指定時間以上動き続けたらCRITICALとなる Plugin です。
たぶん、1時間以上で引っ掛けるとかになると思います
動作環境、CentOS7
ライブラリ依存が少ないほうが望ましい。
締め切り：本日18時
```
---
### この問題を解決するために必要な要素
---
* Nagiosプラグインのルール（CRITICALにする方法）
* 指定したプロセスの稼働時間を取得する
* プログラムを書く
---
### Nagios プラグインのルール
* プラグインの Exit ステータス でサービスのステータスが決まる
0 : OK  
1 : WARNING  
2 : CRITICAL  
3 : UNKNOWN  
* プラグインの標準出力がステータス情報として処理される。
* 出力に|（パイプ）が含まれている場合、パイプ以降はパフォーマンスデータとして処理される
---
#### しきい値の指定  
-w : WARNING しきい値  
-c : CRITICAL しきい値   
--- 
|しきい値の指定|検知範囲|
|---|---|
|10|< 0 or > 10|
|10:|< 10|
|~:10|> 10|
|10:20|< 10 or > 20|
|@10:20|<= 10 or >= 20|

--- 
### デバッグオプションの指定方法など、他にも制約がある
詳細はこちら  
Nagios Plugins Development Guidelines  
http://nagios-plugins.org/doc/guidelines.html  
---
### 早速実装してみよう shell 編
./shell/ 以下を参照
---
#### 実装したのもつかの間、こんな依頼が
```
GCP の stack driver で収集しているメトリックを監視したい！！
```
---
### 早速実装してみよう python 編
./python/ 以下を参照
---
#### 実装したのもつかの間、こんなことに…
```
pip入れるの面倒だな、ライブラリへの依存をなくしたい
どうにかならない？？
```
---
### 早速実装してみよう go lang 編
./go/ 以下を参照
---
### おまけ （グラフの作り方）
./graph/ 以下を参照
---
### おわり
